<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy Baseball Draft Tool</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        body {
            margin: 0;
            padding: 20px;
            background: #0d1f0d;
            color: #eee;
        }
        h1 {
            text-align: center;
            color: #5cb85c;
            margin-bottom: 5px;
        }
        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 20px;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .tab {
            padding: 10px 20px;
            background: #1a3d1a;
            border: none;
            color: #eee;
            cursor: pointer;
            border-radius: 5px;
            font-size: 14px;
        }
        .tab.active {
            background: #5cb85c;
            color: #000;
        }
        .tab:hover:not(.active) {
            background: #2d5a2d;
        }
        .panel {
            display: none;
            background: #1a3d1a;
            border-radius: 10px;
            padding: 20px;
        }
        .panel.active {
            display: block;
        }
        .roster-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        .roster-slot {
            background: #0d1f0d;
            border: 2px solid #2d5a2d;
            border-radius: 8px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .roster-slot:hover {
            border-color: #5cb85c;
        }
        .roster-slot.filled {
            border-color: #5cb85c;
            background: #1a4d1a;
        }
        .roster-slot .position {
            font-size: 12px;
            color: #888;
            font-weight: bold;
        }
        .roster-slot .player-name {
            font-size: 14px;
            margin-top: 5px;
            color: #5cb85c;
        }
        .roster-slot .player-stats {
            font-size: 11px;
            color: #888;
            margin-top: 3px;
        }
        .category-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .category-table th, .category-table td {
            padding: 8px 12px;
            text-align: center;
            border-bottom: 1px solid #2d5a2d;
        }
        .category-table th {
            background: #1a4d1a;
            color: #5cb85c;
        }
        .category-table .win-prob {
            font-weight: bold;
        }
        .win-prob.good { color: #4ade80; }
        .win-prob.neutral { color: #fbbf24; }
        .win-prob.bad { color: #f87171; }
        .search-box {
            width: 100%;
            padding: 12px;
            border: 2px solid #2d5a2d;
            border-radius: 8px;
            background: #0d1f0d;
            color: #eee;
            font-size: 16px;
            margin-bottom: 15px;
        }
        .search-box:focus {
            outline: none;
            border-color: #5cb85c;
        }
        .player-list {
            max-height: 500px;
            overflow-y: auto;
        }
        .player-row {
            display: grid;
            grid-template-columns: 30px 200px repeat(8, 60px) 80px 80px;
            padding: 8px 5px;
            border-bottom: 1px solid #2d5a2d;
            cursor: pointer;
            font-size: 13px;
            align-items: center;
        }
        .player-row:hover {
            background: #2d5a2d;
        }
        .player-row.header {
            background: #1a4d1a;
            font-weight: bold;
            color: #5cb85c;
            cursor: default;
            position: sticky;
            top: 0;
        }
        .player-row.drafted {
            opacity: 0.4;
            text-decoration: line-through;
        }
        .marginal-value {
            color: #4ade80;
            font-weight: bold;
        }
        .z-total {
            color: #fbbf24;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal.active {
            display: flex;
        }
        .modal-content {
            background: #1a3d1a;
            border-radius: 10px;
            padding: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        .modal-content h3 {
            margin-top: 0;
            color: #5cb85c;
        }
        .team-select {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        .team-btn {
            padding: 10px;
            border: 2px solid #2d5a2d;
            border-radius: 5px;
            background: #0d1f0d;
            color: #eee;
            cursor: pointer;
            font-size: 12px;
        }
        .team-btn:hover {
            border-color: #5cb85c;
        }
        .team-btn.my-team {
            border-color: #4ade80;
            background: #1a4d1a;
        }
        .team-btn.selected {
            border-color: #fbbf24;
            background: #3d3d1a;
        }
        .position-select {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #2d5a2d;
        }
        .position-btn {
            padding: 8px;
            border: 2px solid #2d5a2d;
            border-radius: 5px;
            background: #0d1f0d;
            color: #eee;
            cursor: pointer;
            font-size: 11px;
            text-align: center;
        }
        .position-btn:hover {
            border-color: #5cb85c;
        }
        .position-btn.filled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        .btn-primary {
            background: #5cb85c;
            color: #000;
        }
        .btn-danger {
            background: #f87171;
            color: #000;
        }
        .btn-secondary {
            background: #2d5a2d;
            color: #eee;
        }
        .expected-wins {
            font-size: 24px;
            text-align: center;
            margin: 20px 0;
        }
        .expected-wins span {
            color: #5cb85c;
            font-weight: bold;
        }
        .draft-log {
            max-height: 400px;
            overflow-y: auto;
            font-size: 12px;
            background: #0d1f0d;
            padding: 10px;
            border-radius: 5px;
        }
        .draft-log-entry {
            padding: 5px 0;
            border-bottom: 1px solid #2d5a2d;
        }
        .draft-log-entry .pick-num {
            color: #888;
        }
        .draft-log-entry .team-name {
            color: #5cb85c;
        }
        .draft-log-entry.my-pick .team-name {
            color: #4ade80;
            font-weight: bold;
        }
        .other-teams-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }
        .other-team-card {
            background: #0d1f0d;
            border-radius: 8px;
            padding: 12px;
            font-size: 11px;
            border: 1px solid #2d5a2d;
        }
        .other-team-card h4 {
            margin: 0 0 8px 0;
            color: #5cb85c;
            font-size: 14px;
            border-bottom: 1px solid #2d5a2d;
            padding-bottom: 5px;
        }
        .other-team-card.my-team-card {
            border-color: #4ade80;
        }
        .other-team-card.my-team-card h4 {
            color: #4ade80;
        }
        .team-roster-mini {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2px;
        }
        .mini-slot {
            display: flex;
            font-size: 10px;
            padding: 2px 0;
        }
        .mini-slot .pos {
            color: #888;
            width: 30px;
            flex-shrink: 0;
        }
        .mini-slot .name {
            color: #ccc;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .mini-slot .name.empty {
            color: #555;
            font-style: italic;
        }
        .team-projections {
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid #2d5a2d;
            font-size: 10px;
        }
        .proj-row {
            display: flex;
            justify-content: space-between;
            padding: 1px 0;
        }
        .proj-row .cat {
            color: #888;
        }
        .proj-row .val {
            color: #5cb85c;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Fantasy Baseball Draft Tool</h1>
        <p class="subtitle">Dynamic rankings based on marginal win probability</p>

        <div class="tabs">
            <button class="tab active" data-tab="roster">My Roster</button>
            <button class="tab" data-tab="available">Best Available</button>
            <button class="tab" data-tab="teams">All Teams</button>
            <button class="tab" data-tab="log">Draft Log</button>
        </div>

        <!-- My Roster Panel -->
        <div class="panel active" id="roster-panel">
            <div class="expected-wins">
                Expected Wins/Week: <span id="expected-wins">3.11</span> / 7
            </div>

            <div class="roster-grid" id="roster-grid"></div>

            <h3>Category Win Probabilities</h3>
            <table class="category-table">
                <thead>
                    <tr>
                        <th>Category</th>
                        <th>My Weekly</th>
                        <th>Lg Avg</th>
                        <th>P(Win)</th>
                    </tr>
                </thead>
                <tbody id="category-tbody"></tbody>
            </table>
        </div>

        <!-- Best Available Panel -->
        <div class="panel" id="available-panel">
            <input type="text" class="search-box" id="player-search" placeholder="Search players...">
            <div class="player-list" id="player-list"></div>
        </div>

        <!-- All Teams Panel -->
        <div class="panel" id="teams-panel">
            <div class="other-teams-grid" id="other-teams-grid"></div>
        </div>

        <!-- Draft Log Panel -->
        <div class="panel" id="log-panel">
            <div class="draft-log" id="draft-log">
                <em>No picks yet...</em>
            </div>
        </div>
    </div>

    <!-- Player Selection Modal -->
    <div class="modal" id="draft-modal">
        <div class="modal-content">
            <h3>Draft <span id="modal-player-name"></span></h3>
            <p>Select team:</p>
            <div class="team-select" id="team-select"></div>
            <div id="position-select-container" style="display:none;">
                <p>Select position:</p>
                <div class="position-select" id="position-select"></div>
            </div>
            <div style="text-align: center; margin-top: 15px;">
                <button class="btn btn-primary" id="confirm-draft-btn" style="display:none;" onclick="confirmDraft()">Confirm Draft</button>
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Roster Slot Modal -->
    <div class="modal" id="slot-modal">
        <div class="modal-content">
            <h3 id="slot-modal-title">Position</h3>
            <input type="text" class="search-box" id="slot-search" placeholder="Search players...">
            <div class="player-list" id="slot-player-list" style="max-height: 300px;"></div>
            <div style="text-align: center; margin-top: 15px;">
                <button class="btn btn-danger" id="clear-slot-btn" style="display:none;">Remove Player</button>
                <button class="btn btn-secondary" onclick="closeSlotModal()">Cancel</button>
            </div>
        </div>
    </div>

    <script>
    // =============================================================================
    // PLAYER DATA (embedded)
    // =============================================================================
    const PLAYERS = [{"name": "Shohei Ohtani", "pa": 671, "r": 124, "hr": 48, "rbi": 118, "so": 158, "tb": 342, "sb": 23, "obp": 0.385, "zTotal": 2.73}, {"name": "Jos\u00e9 Ram\u00edrez", "pa": 658, "r": 95, "hr": 29, "rbi": 91, "so": 76, "tb": 290, "sb": 33, "obp": 0.348, "zTotal": 2.49}, {"name": "Aaron Judge", "pa": 646, "r": 106, "hr": 49, "rbi": 120, "so": 161, "tb": 325, "sb": 8, "obp": 0.414, "zTotal": 2.43}, {"name": "Juan Soto", "pa": 681, "r": 107, "hr": 37, "rbi": 97, "so": 122, "tb": 285, "sb": 17, "obp": 0.401, "zTotal": 2.36}, {"name": "Bobby Witt Jr.", "pa": 668, "r": 102, "hr": 27, "rbi": 92, "so": 115, "tb": 304, "sb": 35, "obp": 0.341, "zTotal": 2.34}, {"name": "Kyle Tucker", "pa": 625, "r": 97, "hr": 30, "rbi": 89, "so": 88, "tb": 267, "sb": 19, "obp": 0.369, "zTotal": 2.2}, {"name": "Corbin Carroll", "pa": 650, "r": 105, "hr": 26, "rbi": 80, "so": 139, "tb": 276, "sb": 36, "obp": 0.345, "zTotal": 2.11}, {"name": "Yordan Alvarez", "pa": 625, "r": 91, "hr": 33, "rbi": 97, "so": 106, "tb": 288, "sb": 4, "obp": 0.383, "zTotal": 2.03}, {"name": "Ronald Acu\u00f1a Jr.", "pa": 627, "r": 99, "hr": 28, "rbi": 82, "so": 137, "tb": 257, "sb": 28, "obp": 0.378, "zTotal": 2.03}, {"name": "Vladimir Guerrero Jr.", "pa": 672, "r": 94, "hr": 27, "rbi": 92, "so": 90, "tb": 286, "sb": 6, "obp": 0.376, "zTotal": 2.02}, {"name": "Julio Rodr\u00edguez", "pa": 663, "r": 95, "hr": 30, "rbi": 92, "so": 149, "tb": 292, "sb": 25, "obp": 0.338, "zTotal": 1.96}, {"name": "Francisco Lindor", "pa": 674, "r": 94, "hr": 29, "rbi": 86, "so": 126, "tb": 273, "sb": 24, "obp": 0.332, "zTotal": 1.95}, {"name": "Fernando Tatis Jr.", "pa": 643, "r": 95, "hr": 27, "rbi": 82, "so": 129, "tb": 264, "sb": 23, "obp": 0.35, "zTotal": 1.91}, {"name": "Junior Caminero", "pa": 632, "r": 83, "hr": 36, "rbi": 106, "so": 121, "tb": 295, "sb": 5, "obp": 0.322, "zTotal": 1.86}, {"name": "Gunnar Henderson", "pa": 658, "r": 97, "hr": 27, "rbi": 83, "so": 142, "tb": 278, "sb": 20, "obp": 0.346, "zTotal": 1.83}, {"name": "Ketel Marte", "pa": 625, "r": 87, "hr": 29, "rbi": 95, "so": 104, "tb": 271, "sb": 5, "obp": 0.358, "zTotal": 1.83}, {"name": "Mookie Betts", "pa": 629, "r": 87, "hr": 22, "rbi": 81, "so": 72, "tb": 250, "sb": 9, "obp": 0.346, "zTotal": 1.81}, {"name": "Kyle Schwarber", "pa": 667, "r": 99, "hr": 44, "rbi": 111, "so": 186, "tb": 284, "sb": 6, "obp": 0.352, "zTotal": 1.81}, {"name": "Jackson Chourio", "pa": 628, "r": 84, "hr": 23, "rbi": 87, "so": 126, "tb": 268, "sb": 25, "obp": 0.323, "zTotal": 1.79}, {"name": "Cal Raleigh", "pa": 629, "r": 87, "hr": 44, "rbi": 113, "so": 172, "tb": 284, "sb": 8, "obp": 0.331, "zTotal": 1.78}, {"name": "Jazz Chisholm Jr.", "pa": 625, "r": 93, "hr": 31, "rbi": 77, "so": 167, "tb": 253, "sb": 32, "obp": 0.315, "zTotal": 1.72}, {"name": "Bryce Harper", "pa": 625, "r": 87, "hr": 27, "rbi": 88, "so": 131, "tb": 263, "sb": 10, "obp": 0.366, "zTotal": 1.71}, {"name": "Corey Seager", "pa": 625, "r": 82, "hr": 30, "rbi": 95, "so": 119, "tb": 269, "sb": 3, "obp": 0.355, "zTotal": 1.7}, {"name": "Trea Turner", "pa": 625, "r": 86, "hr": 18, "rbi": 75, "so": 114, "tb": 254, "sb": 24, "obp": 0.333, "zTotal": 1.7}, {"name": "Josh Naylor", "pa": 625, "r": 76, "hr": 24, "rbi": 82, "so": 93, "tb": 244, "sb": 15, "obp": 0.327, "zTotal": 1.69}, {"name": "Elly De La Cruz", "pa": 640, "r": 92, "hr": 23, "rbi": 73, "so": 178, "tb": 256, "sb": 39, "obp": 0.327, "zTotal": 1.67}, {"name": "Pete Alonso", "pa": 662, "r": 89, "hr": 36, "rbi": 98, "so": 152, "tb": 281, "sb": 3, "obp": 0.332, "zTotal": 1.63}, {"name": "Chandler Simpson", "pa": 625, "r": 78, "hr": 7, "rbi": 52, "so": 86, "tb": 208, "sb": 41, "obp": 0.325, "zTotal": 1.63}, {"name": "Zach Neto", "pa": 638, "r": 86, "hr": 27, "rbi": 77, "so": 159, "tb": 256, "sb": 27, "obp": 0.318, "zTotal": 1.61}, {"name": "Nick Kurtz", "pa": 625, "r": 95, "hr": 39, "rbi": 100, "so": 189, "tb": 285, "sb": 4, "obp": 0.353, "zTotal": 1.61}, {"name": "Shea Langeliers", "pa": 625, "r": 85, "hr": 34, "rbi": 91, "so": 144, "tb": 280, "sb": 8, "obp": 0.316, "zTotal": 1.61}, {"name": "Brent Rooker", "pa": 640, "r": 89, "hr": 34, "rbi": 93, "so": 162, "tb": 284, "sb": 7, "obp": 0.341, "zTotal": 1.61}, {"name": "Maikel Garcia", "pa": 638, "r": 82, "hr": 13, "rbi": 65, "so": 93, "tb": 230, "sb": 26, "obp": 0.327, "zTotal": 1.61}, {"name": "Vinnie Pasquantino", "pa": 625, "r": 76, "hr": 27, "rbi": 92, "so": 91, "tb": 261, "sb": 1, "obp": 0.327, "zTotal": 1.61}, {"name": "Cody Bellinger", "pa": 625, "r": 78, "hr": 25, "rbi": 77, "so": 96, "tb": 249, "sb": 12, "obp": 0.318, "zTotal": 1.6}, {"name": "Byron Buxton", "pa": 625, "r": 89, "hr": 32, "rbi": 89, "so": 167, "tb": 273, "sb": 16, "obp": 0.318, "zTotal": 1.59}, {"name": "Pete Crow-Armstrong", "pa": 625, "r": 88, "hr": 23, "rbi": 71, "so": 154, "tb": 249, "sb": 33, "obp": 0.298, "zTotal": 1.58}, {"name": "Freddie Freeman", "pa": 625, "r": 85, "hr": 21, "rbi": 81, "so": 113, "tb": 251, "sb": 9, "obp": 0.353, "zTotal": 1.58}, {"name": "Luis Arraez", "pa": 625, "r": 72, "hr": 7, "rbi": 66, "so": 33, "tb": 231, "sb": 8, "obp": 0.348, "zTotal": 1.58}, {"name": "CJ Abrams", "pa": 625, "r": 79, "hr": 19, "rbi": 69, "so": 122, "tb": 235, "sb": 31, "obp": 0.309, "zTotal": 1.57}, {"name": "Rafael Devers", "pa": 657, "r": 88, "hr": 33, "rbi": 95, "so": 160, "tb": 274, "sb": 2, "obp": 0.354, "zTotal": 1.56}, {"name": "Nico Hoerner", "pa": 625, "r": 76, "hr": 7, "rbi": 57, "so": 64, "tb": 210, "sb": 26, "obp": 0.327, "zTotal": 1.55}, {"name": "Jacob Wilson", "pa": 625, "r": 76, "hr": 13, "rbi": 69, "so": 60, "tb": 244, "sb": 6, "obp": 0.344, "zTotal": 1.54}, {"name": "Luke Keaschall", "pa": 625, "r": 81, "hr": 16, "rbi": 68, "so": 112, "tb": 233, "sb": 21, "obp": 0.341, "zTotal": 1.52}, {"name": "Jose Altuve", "pa": 625, "r": 80, "hr": 23, "rbi": 75, "so": 110, "tb": 243, "sb": 12, "obp": 0.327, "zTotal": 1.52}, {"name": "George Springer", "pa": 625, "r": 84, "hr": 24, "rbi": 75, "so": 122, "tb": 239, "sb": 14, "obp": 0.331, "zTotal": 1.52}, {"name": "Geraldo Perdomo", "pa": 645, "r": 83, "hr": 13, "rbi": 59, "so": 88, "tb": 216, "sb": 18, "obp": 0.349, "zTotal": 1.51}, {"name": "Wyatt Langford", "pa": 625, "r": 86, "hr": 23, "rbi": 73, "so": 147, "tb": 239, "sb": 20, "obp": 0.341, "zTotal": 1.5}, {"name": "Will Smith", "pa": 625, "r": 84, "hr": 25, "rbi": 82, "so": 121, "tb": 242, "sb": 5, "obp": 0.346, "zTotal": 1.49}, {"name": "Jeremy Pe\u00f1a", "pa": 633, "r": 82, "hr": 18, "rbi": 70, "so": 114, "tb": 244, "sb": 17, "obp": 0.327, "zTotal": 1.49}, {"name": "Steven Kwan", "pa": 641, "r": 74, "hr": 8, "rbi": 58, "so": 55, "tb": 212, "sb": 16, "obp": 0.342, "zTotal": 1.49}, {"name": "Manny Machado", "pa": 630, "r": 78, "hr": 26, "rbi": 83, "so": 123, "tb": 253, "sb": 9, "obp": 0.32, "zTotal": 1.48}, {"name": "Jackson Merrill", "pa": 625, "r": 78, "hr": 23, "rbi": 81, "so": 123, "tb": 260, "sb": 9, "obp": 0.318, "zTotal": 1.45}, {"name": "Michael Harris II", "pa": 625, "r": 80, "hr": 20, "rbi": 75, "so": 126, "tb": 246, "sb": 19, "obp": 0.303, "zTotal": 1.45}, {"name": "Alex Bregman", "pa": 637, "r": 76, "hr": 21, "rbi": 78, "so": 89, "tb": 235, "sb": 2, "obp": 0.332, "zTotal": 1.44}, {"name": "Ben Rice", "pa": 625, "r": 81, "hr": 28, "rbi": 80, "so": 131, "tb": 249, "sb": 6, "obp": 0.325, "zTotal": 1.43}, {"name": "Isaac Paredes", "pa": 625, "r": 79, "hr": 26, "rbi": 79, "so": 112, "tb": 236, "sb": 4, "obp": 0.334, "zTotal": 1.43}, {"name": "Caleb Durbin", "pa": 625, "r": 71, "hr": 13, "rbi": 64, "so": 78, "tb": 208, "sb": 21, "obp": 0.312, "zTotal": 1.43}, {"name": "Willy Adames", "pa": 656, "r": 87, "hr": 31, "rbi": 86, "so": 172, "tb": 259, "sb": 11, "obp": 0.32, "zTotal": 1.42}, {"name": "Tyler Freeman", "pa": 625, "r": 78, "hr": 14, "rbi": 65, "so": 106, "tb": 222, "sb": 20, "obp": 0.334, "zTotal": 1.42}, {"name": "Randy Arozarena", "pa": 658, "r": 88, "hr": 23, "rbi": 73, "so": 172, "tb": 233, "sb": 25, "obp": 0.33, "zTotal": 1.41}, {"name": "Matt Olson", "pa": 675, "r": 86, "hr": 30, "rbi": 94, "so": 159, "tb": 263, "sb": 1, "obp": 0.341, "zTotal": 1.41}, {"name": "Yandy D\u00edaz", "pa": 625, "r": 74, "hr": 17, "rbi": 78, "so": 92, "tb": 238, "sb": 2, "obp": 0.352, "zTotal": 1.41}, {"name": "Andy Pages", "pa": 625, "r": 82, "hr": 25, "rbi": 84, "so": 139, "tb": 254, "sb": 10, "obp": 0.308, "zTotal": 1.4}, {"name": "Luis Robert Jr.", "pa": 625, "r": 84, "hr": 23, "rbi": 69, "so": 170, "tb": 232, "sb": 32, "obp": 0.301, "zTotal": 1.4}, {"name": "Luis Garc\u00eda Jr.", "pa": 625, "r": 72, "hr": 18, "rbi": 75, "so": 107, "tb": 237, "sb": 16, "obp": 0.305, "zTotal": 1.4}, {"name": "Teoscar Hern\u00e1ndez", "pa": 625, "r": 85, "hr": 28, "rbi": 88, "so": 158, "tb": 265, "sb": 7, "obp": 0.314, "zTotal": 1.39}, {"name": "Bo Bichette", "pa": 625, "r": 76, "hr": 17, "rbi": 74, "so": 102, "tb": 249, "sb": 7, "obp": 0.33, "zTotal": 1.38}, {"name": "Hunter Goodman", "pa": 625, "r": 79, "hr": 31, "rbi": 96, "so": 161, "tb": 277, "sb": 3, "obp": 0.307, "zTotal": 1.37}, {"name": "James Wood", "pa": 641, "r": 86, "hr": 25, "rbi": 83, "so": 189, "tb": 255, "sb": 17, "obp": 0.348, "zTotal": 1.37}, {"name": "Bryson Stott", "pa": 625, "r": 75, "hr": 14, "rbi": 62, "so": 109, "tb": 214, "sb": 23, "obp": 0.317, "zTotal": 1.37}, {"name": "Sal Stewart", "pa": 625, "r": 75, "hr": 23, "rbi": 82, "so": 126, "tb": 246, "sb": 7, "obp": 0.324, "zTotal": 1.37}, {"name": "Jarren Duran", "pa": 625, "r": 82, "hr": 16, "rbi": 66, "so": 145, "tb": 236, "sb": 24, "obp": 0.325, "zTotal": 1.36}, {"name": "Christian Yelich", "pa": 625, "r": 80, "hr": 21, "rbi": 78, "so": 152, "tb": 230, "sb": 17, "obp": 0.34, "zTotal": 1.36}, {"name": "Cedric Mullins", "pa": 625, "r": 79, "hr": 21, "rbi": 68, "so": 139, "tb": 224, "sb": 24, "obp": 0.307, "zTotal": 1.36}, {"name": "Alec Burleson", "pa": 625, "r": 71, "hr": 19, "rbi": 76, "so": 93, "tb": 235, "sb": 6, "obp": 0.316, "zTotal": 1.36}, {"name": "William Contreras", "pa": 625, "r": 76, "hr": 20, "rbi": 80, "so": 123, "tb": 231, "sb": 6, "obp": 0.35, "zTotal": 1.35}, {"name": "Jordan Westburg", "pa": 625, "r": 82, "hr": 25, "rbi": 80, "so": 143, "tb": 259, "sb": 8, "obp": 0.314, "zTotal": 1.35}, {"name": "Xander Bogaerts", "pa": 625, "r": 76, "hr": 15, "rbi": 66, "so": 115, "tb": 221, "sb": 19, "obp": 0.326, "zTotal": 1.35}, {"name": "Iv\u00e1n Herrera", "pa": 625, "r": 79, "hr": 20, "rbi": 74, "so": 126, "tb": 233, "sb": 9, "obp": 0.343, "zTotal": 1.35}, {"name": "Jurickson Profar", "pa": 625, "r": 77, "hr": 18, "rbi": 68, "so": 104, "tb": 216, "sb": 9, "obp": 0.339, "zTotal": 1.35}, {"name": "Kerry Carpenter", "pa": 625, "r": 78, "hr": 29, "rbi": 87, "so": 146, "tb": 260, "sb": 5, "obp": 0.309, "zTotal": 1.35}, {"name": "Mickey Moniak", "pa": 625, "r": 80, "hr": 25, "rbi": 84, "so": 151, "tb": 260, "sb": 12, "obp": 0.305, "zTotal": 1.35}, {"name": "Max Muncy", "pa": 625, "r": 83, "hr": 28, "rbi": 84, "so": 147, "tb": 232, "sb": 5, "obp": 0.331, "zTotal": 1.34}, {"name": "Seiya Suzuki", "pa": 625, "r": 83, "hr": 25, "rbi": 81, "so": 158, "tb": 244, "sb": 10, "obp": 0.333, "zTotal": 1.34}, {"name": "Brice Turang", "pa": 629, "r": 77, "hr": 13, "rbi": 62, "so": 133, "tb": 212, "sb": 30, "obp": 0.32, "zTotal": 1.34}, {"name": "Salvador Perez", "pa": 625, "r": 70, "hr": 29, "rbi": 97, "so": 129, "tb": 257, "sb": 1, "obp": 0.301, "zTotal": 1.34}, {"name": "Trevor Story", "pa": 625, "r": 80, "hr": 23, "rbi": 76, "so": 168, "tb": 243, "sb": 24, "obp": 0.303, "zTotal": 1.33}, {"name": "Jung Hoo Lee", "pa": 625, "r": 75, "hr": 11, "rbi": 63, "so": 77, "tb": 229, "sb": 9, "obp": 0.327, "zTotal": 1.33}, {"name": "Kazuma Okamoto", "pa": 625, "r": 78, "hr": 28, "rbi": 85, "so": 137, "tb": 244, "sb": 3, "obp": 0.318, "zTotal": 1.33}, {"name": "Otto Lopez", "pa": 625, "r": 72, "hr": 13, "rbi": 64, "so": 102, "tb": 223, "sb": 18, "obp": 0.317, "zTotal": 1.33}, {"name": "Xavier Edwards", "pa": 625, "r": 73, "hr": 5, "rbi": 49, "so": 93, "tb": 202, "sb": 28, "obp": 0.335, "zTotal": 1.33}, {"name": "Wilyer Abreu", "pa": 625, "r": 77, "hr": 26, "rbi": 84, "so": 152, "tb": 246, "sb": 11, "obp": 0.319, "zTotal": 1.33}, {"name": "Jorge Polanco", "pa": 625, "r": 76, "hr": 25, "rbi": 80, "so": 130, "tb": 240, "sb": 7, "obp": 0.315, "zTotal": 1.33}, {"name": "Oneil Cruz", "pa": 625, "r": 86, "hr": 24, "rbi": 73, "so": 181, "tb": 236, "sb": 26, "obp": 0.314, "zTotal": 1.32}, {"name": "Ozzie Albies", "pa": 625, "r": 72, "hr": 18, "rbi": 72, "so": 96, "tb": 227, "sb": 10, "obp": 0.305, "zTotal": 1.32}, {"name": "Matt Chapman", "pa": 625, "r": 85, "hr": 27, "rbi": 76, "so": 156, "tb": 242, "sb": 9, "obp": 0.33, "zTotal": 1.31}, {"name": "Anthony Santander", "pa": 625, "r": 77, "hr": 30, "rbi": 85, "so": 138, "tb": 245, "sb": 3, "obp": 0.307, "zTotal": 1.31}, {"name": "Jos\u00e9 Caballero", "pa": 625, "r": 80, "hr": 16, "rbi": 56, "so": 153, "tb": 202, "sb": 38, "obp": 0.304, "zTotal": 1.31}, {"name": "Lourdes Gurriel Jr.", "pa": 625, "r": 74, "hr": 20, "rbi": 77, "so": 120, "tb": 236, "sb": 10, "obp": 0.313, "zTotal": 1.31}, {"name": "Alejandro Kirk", "pa": 625, "r": 73, "hr": 18, "rbi": 72, "so": 90, "tb": 224, "sb": 3, "obp": 0.332, "zTotal": 1.3}, {"name": "Gleyber Torres", "pa": 635, "r": 76, "hr": 17, "rbi": 69, "so": 110, "tb": 220, "sb": 8, "obp": 0.343, "zTotal": 1.3}, {"name": "Brandon Nimmo", "pa": 633, "r": 83, "hr": 22, "rbi": 72, "so": 137, "tb": 241, "sb": 8, "obp": 0.333, "zTotal": 1.3}, {"name": "Marcus Semien", "pa": 625, "r": 74, "hr": 21, "rbi": 72, "so": 108, "tb": 227, "sb": 9, "obp": 0.309, "zTotal": 1.3}, {"name": "Agust\u00edn Ram\u00edrez", "pa": 625, "r": 74, "hr": 21, "rbi": 78, "so": 127, "tb": 237, "sb": 12, "obp": 0.308, "zTotal": 1.3}, {"name": "Tyler Soderstrom", "pa": 625, "r": 80, "hr": 26, "rbi": 81, "so": 150, "tb": 253, "sb": 6, "obp": 0.321, "zTotal": 1.3}, {"name": "Ha-Seong Kim", "pa": 625, "r": 78, "hr": 18, "rbi": 66, "so": 128, "tb": 219, "sb": 18, "obp": 0.317, "zTotal": 1.3}, {"name": "Tommy Edman", "pa": 625, "r": 78, "hr": 19, "rbi": 71, "so": 115, "tb": 227, "sb": 13, "obp": 0.3, "zTotal": 1.3}, {"name": "Sal Frelick", "pa": 625, "r": 72, "hr": 10, "rbi": 61, "so": 93, "tb": 209, "sb": 18, "obp": 0.324, "zTotal": 1.3}, {"name": "Jake McCarthy", "pa": 625, "r": 78, "hr": 15, "rbi": 63, "so": 123, "tb": 222, "sb": 21, "obp": 0.315, "zTotal": 1.3}, {"name": "Brendan Donovan", "pa": 625, "r": 72, "hr": 13, "rbi": 68, "so": 88, "tb": 221, "sb": 6, "obp": 0.341, "zTotal": 1.29}, {"name": "Jo Adell", "pa": 625, "r": 79, "hr": 32, "rbi": 84, "so": 168, "tb": 255, "sb": 11, "obp": 0.296, "zTotal": 1.29}, {"name": "Nolan Schanuel", "pa": 625, "r": 73, "hr": 14, "rbi": 61, "so": 87, "tb": 210, "sb": 7, "obp": 0.354, "zTotal": 1.29}, {"name": "Javier Sanoja", "pa": 625, "r": 73, "hr": 17, "rbi": 69, "so": 111, "tb": 228, "sb": 14, "obp": 0.31, "zTotal": 1.29}, {"name": "Trent Grisham", "pa": 625, "r": 81, "hr": 28, "rbi": 77, "so": 152, "tb": 230, "sb": 7, "obp": 0.327, "zTotal": 1.28}, {"name": "Mike Trout", "pa": 625, "r": 82, "hr": 31, "rbi": 86, "so": 180, "tb": 248, "sb": 5, "obp": 0.345, "zTotal": 1.28}, {"name": "Daulton Varsho", "pa": 625, "r": 80, "hr": 29, "rbi": 81, "so": 159, "tb": 244, "sb": 11, "obp": 0.294, "zTotal": 1.28}, {"name": "Nolan Arenado", "pa": 625, "r": 68, "hr": 18, "rbi": 78, "so": 91, "tb": 230, "sb": 4, "obp": 0.308, "zTotal": 1.28}, {"name": "Lane Thomas", "pa": 625, "r": 79, "hr": 20, "rbi": 71, "so": 149, "tb": 227, "sb": 21, "obp": 0.307, "zTotal": 1.28}, {"name": "Royce Lewis", "pa": 625, "r": 75, "hr": 22, "rbi": 75, "so": 134, "tb": 236, "sb": 13, "obp": 0.301, "zTotal": 1.27}, {"name": "Luis Matos", "pa": 625, "r": 73, "hr": 20, "rbi": 71, "so": 113, "tb": 230, "sb": 10, "obp": 0.302, "zTotal": 1.27}, {"name": "Gabriel Moreno", "pa": 625, "r": 75, "hr": 16, "rbi": 73, "so": 115, "tb": 229, "sb": 7, "obp": 0.334, "zTotal": 1.26}, {"name": "Taylor Ward", "pa": 625, "r": 80, "hr": 27, "rbi": 81, "so": 154, "tb": 242, "sb": 5, "obp": 0.329, "zTotal": 1.26}, {"name": "Evan Carter", "pa": 625, "r": 78, "hr": 18, "rbi": 66, "so": 137, "tb": 224, "sb": 18, "obp": 0.318, "zTotal": 1.26}, {"name": "Brenton Doyle", "pa": 625, "r": 80, "hr": 21, "rbi": 72, "so": 165, "tb": 241, "sb": 22, "obp": 0.303, "zTotal": 1.26}, {"name": "Adley Rutschman", "pa": 625, "r": 74, "hr": 19, "rbi": 72, "so": 103, "tb": 225, "sb": 2, "obp": 0.333, "zTotal": 1.25}, {"name": "Austin Riley", "pa": 625, "r": 80, "hr": 27, "rbi": 88, "so": 161, "tb": 258, "sb": 2, "obp": 0.323, "zTotal": 1.25}, {"name": "Brandon Lowe", "pa": 625, "r": 77, "hr": 28, "rbi": 87, "so": 158, "tb": 249, "sb": 6, "obp": 0.313, "zTotal": 1.25}, {"name": "Willson Contreras", "pa": 625, "r": 79, "hr": 25, "rbi": 82, "so": 156, "tb": 238, "sb": 6, "obp": 0.338, "zTotal": 1.25}, {"name": "Kevin McGonigle", "pa": 625, "r": 74, "hr": 16, "rbi": 66, "so": 111, "tb": 221, "sb": 13, "obp": 0.314, "zTotal": 1.25}, {"name": "Eugenio Su\u00e1rez", "pa": 625, "r": 79, "hr": 34, "rbi": 96, "so": 183, "tb": 257, "sb": 4, "obp": 0.306, "zTotal": 1.24}, {"name": "Jeff McNeil", "pa": 625, "r": 72, "hr": 15, "rbi": 66, "so": 91, "tb": 224, "sb": 4, "obp": 0.325, "zTotal": 1.24}, {"name": "Willi Castro", "pa": 625, "r": 78, "hr": 16, "rbi": 67, "so": 140, "tb": 227, "sb": 17, "obp": 0.327, "zTotal": 1.24}, {"name": "David Hamilton", "pa": 625, "r": 76, "hr": 20, "rbi": 70, "so": 144, "tb": 224, "sb": 19, "obp": 0.306, "zTotal": 1.24}, {"name": "Riley Greene", "pa": 625, "r": 83, "hr": 29, "rbi": 86, "so": 179, "tb": 261, "sb": 4, "obp": 0.328, "zTotal": 1.23}, {"name": "Yainer Diaz", "pa": 625, "r": 71, "hr": 21, "rbi": 78, "so": 114, "tb": 246, "sb": 3, "obp": 0.302, "zTotal": 1.23}, {"name": "Andr\u00e9s Gim\u00e9nez", "pa": 625, "r": 74, "hr": 13, "rbi": 57, "so": 114, "tb": 205, "sb": 24, "obp": 0.305, "zTotal": 1.23}, {"name": "Tyler O'Neill", "pa": 625, "r": 79, "hr": 27, "rbi": 80, "so": 160, "tb": 238, "sb": 9, "obp": 0.316, "zTotal": 1.23}, {"name": "Daylen Lile", "pa": 625, "r": 73, "hr": 13, "rbi": 67, "so": 117, "tb": 231, "sb": 14, "obp": 0.317, "zTotal": 1.23}, {"name": "Esteury Ruiz", "pa": 625, "r": 76, "hr": 19, "rbi": 70, "so": 141, "tb": 225, "sb": 17, "obp": 0.309, "zTotal": 1.23}, {"name": "Masataka Yoshida", "pa": 625, "r": 73, "hr": 18, "rbi": 73, "so": 118, "tb": 227, "sb": 9, "obp": 0.318, "zTotal": 1.23}, {"name": "Roman Anthony", "pa": 625, "r": 80, "hr": 18, "rbi": 72, "so": 153, "tb": 233, "sb": 11, "obp": 0.349, "zTotal": 1.22}, {"name": "TJ Friedl", "pa": 625, "r": 73, "hr": 16, "rbi": 60, "so": 107, "tb": 206, "sb": 12, "obp": 0.329, "zTotal": 1.22}, {"name": "Joc Pederson", "pa": 625, "r": 76, "hr": 24, "rbi": 76, "so": 140, "tb": 228, "sb": 7, "obp": 0.322, "zTotal": 1.22}, {"name": "Sam Haggerty", "pa": 625, "r": 77, "hr": 17, "rbi": 65, "so": 137, "tb": 219, "sb": 20, "obp": 0.314, "zTotal": 1.22}, {"name": "Jorge Mateo", "pa": 625, "r": 79, "hr": 19, "rbi": 66, "so": 150, "tb": 222, "sb": 23, "obp": 0.298, "zTotal": 1.22}, {"name": "Dairon Blanco", "pa": 625, "r": 76, "hr": 20, "rbi": 71, "so": 141, "tb": 226, "sb": 15, "obp": 0.309, "zTotal": 1.22}, {"name": "Jackson Holliday", "pa": 625, "r": 79, "hr": 17, "rbi": 65, "so": 139, "tb": 222, "sb": 16, "obp": 0.326, "zTotal": 1.21}, {"name": "Lawrence Butler", "pa": 625, "r": 81, "hr": 23, "rbi": 72, "so": 165, "tb": 235, "sb": 17, "obp": 0.307, "zTotal": 1.21}, {"name": "Kyle Manzardo", "pa": 625, "r": 73, "hr": 27, "rbi": 85, "so": 145, "tb": 242, "sb": 3, "obp": 0.313, "zTotal": 1.21}, {"name": "Ceddanne Rafaela", "pa": 625, "r": 74, "hr": 17, "rbi": 67, "so": 138, "tb": 231, "sb": 22, "obp": 0.288, "zTotal": 1.21}, {"name": "Jasson Dom\u00ednguez", "pa": 625, "r": 78, "hr": 19, "rbi": 67, "so": 153, "tb": 223, "sb": 20, "obp": 0.312, "zTotal": 1.21}, {"name": "Dylan Moore", "pa": 625, "r": 79, "hr": 21, "rbi": 70, "so": 160, "tb": 223, "sb": 20, "obp": 0.306, "zTotal": 1.21}, {"name": "Matt Shaw", "pa": 625, "r": 76, "hr": 19, "rbi": 70, "so": 138, "tb": 224, "sb": 16, "obp": 0.307, "zTotal": 1.21}, {"name": "Warming Bernabel", "pa": 625, "r": 74, "hr": 20, "rbi": 75, "so": 133, "tb": 232, "sb": 10, "obp": 0.312, "zTotal": 1.21}, {"name": "Michael Busch", "pa": 625, "r": 78, "hr": 26, "rbi": 85, "so": 157, "tb": 243, "sb": 4, "obp": 0.323, "zTotal": 1.2}, {"name": "Ram\u00f3n Laureano", "pa": 625, "r": 80, "hr": 24, "rbi": 77, "so": 161, "tb": 241, "sb": 11, "obp": 0.31, "zTotal": 1.2}, {"name": "Marcell Ozuna", "pa": 625, "r": 76, "hr": 26, "rbi": 82, "so": 150, "tb": 235, "sb": 3, "obp": 0.328, "zTotal": 1.2}, {"name": "Justin Crawford", "pa": 625, "r": 75, "hr": 13, "rbi": 62, "so": 131, "tb": 220, "sb": 21, "obp": 0.308, "zTotal": 1.2}, {"name": "Walker Jenkins", "pa": 625, "r": 75, "hr": 19, "rbi": 72, "so": 133, "tb": 228, "sb": 11, "obp": 0.313, "zTotal": 1.2}, {"name": "Jesus Rodriguez", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 138, "tb": 230, "sb": 11, "obp": 0.312, "zTotal": 1.2}, {"name": "James Triantos", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 138, "tb": 229, "sb": 11, "obp": 0.312, "zTotal": 1.2}, {"name": "Tre' Morgan", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 135, "tb": 229, "sb": 11, "obp": 0.313, "zTotal": 1.2}, {"name": "Eliezer Alfonzo", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 139, "tb": 229, "sb": 11, "obp": 0.312, "zTotal": 1.2}, {"name": "H\u00e9ctor Rodr\u00edguez", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 138, "tb": 230, "sb": 11, "obp": 0.311, "zTotal": 1.2}, {"name": "Ian Happ", "pa": 641, "r": 80, "hr": 21, "rbi": 74, "so": 151, "tb": 226, "sb": 8, "obp": 0.336, "zTotal": 1.19}, {"name": "Thairo Estrada", "pa": 625, "r": 73, "hr": 19, "rbi": 71, "so": 130, "tb": 228, "sb": 12, "obp": 0.303, "zTotal": 1.19}, {"name": "Austin Martin", "pa": 625, "r": 75, "hr": 13, "rbi": 60, "so": 123, "tb": 209, "sb": 18, "obp": 0.323, "zTotal": 1.19}, {"name": "Dylan Crews", "pa": 625, "r": 74, "hr": 18, "rbi": 66, "so": 143, "tb": 217, "sb": 23, "obp": 0.295, "zTotal": 1.19}, {"name": "Spencer Steer", "pa": 625, "r": 73, "hr": 21, "rbi": 73, "so": 136, "tb": 224, "sb": 11, "obp": 0.312, "zTotal": 1.19}, {"name": "Jonny DeLuca", "pa": 625, "r": 74, "hr": 19, "rbi": 70, "so": 134, "tb": 224, "sb": 15, "obp": 0.302, "zTotal": 1.19}, {"name": "Jahmai Jones", "pa": 625, "r": 76, "hr": 21, "rbi": 72, "so": 141, "tb": 228, "sb": 11, "obp": 0.314, "zTotal": 1.19}, {"name": "Leo De Vries", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 142, "tb": 230, "sb": 11, "obp": 0.311, "zTotal": 1.19}, {"name": "Jared Serna", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 139, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.19}, {"name": "Hao-Yu  Lee", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 139, "tb": 229, "sb": 11, "obp": 0.312, "zTotal": 1.19}, {"name": "Enrique Bradfield Jr.", "pa": 625, "r": 75, "hr": 20, "rbi": 72, "so": 138, "tb": 227, "sb": 12, "obp": 0.311, "zTotal": 1.19}, {"name": "Gabriel Gonzalez", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 138, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.19}, {"name": "Gustavo Campero", "pa": 625, "r": 75, "hr": 20, "rbi": 73, "so": 139, "tb": 228, "sb": 12, "obp": 0.311, "zTotal": 1.19}, {"name": "Nate Furman", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 139, "tb": 228, "sb": 11, "obp": 0.312, "zTotal": 1.19}, {"name": "Jonatan Clase", "pa": 625, "r": 75, "hr": 20, "rbi": 73, "so": 142, "tb": 228, "sb": 12, "obp": 0.311, "zTotal": 1.19}, {"name": "Ben Cowles", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 140, "tb": 229, "sb": 11, "obp": 0.312, "zTotal": 1.19}, {"name": "Matthew Wood", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 139, "tb": 229, "sb": 11, "obp": 0.312, "zTotal": 1.19}, {"name": "Brett Sullivan", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 139, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.19}, {"name": "Steward Berroa", "pa": 625, "r": 75, "hr": 20, "rbi": 73, "so": 141, "tb": 228, "sb": 12, "obp": 0.311, "zTotal": 1.19}, {"name": "Jonathon Long", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 140, "tb": 229, "sb": 11, "obp": 0.312, "zTotal": 1.19}, {"name": "Donovan Walton", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 139, "tb": 229, "sb": 11, "obp": 0.312, "zTotal": 1.19}, {"name": "Vinny Capra", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 140, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.19}, {"name": "Jack Winkler", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 140, "tb": 229, "sb": 11, "obp": 0.312, "zTotal": 1.19}, {"name": "Tyler Black", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 140, "tb": 229, "sb": 11, "obp": 0.312, "zTotal": 1.19}, {"name": "Abraham Toro", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 138, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.19}, {"name": "Carlos Correa", "pa": 625, "r": 75, "hr": 20, "rbi": 75, "so": 127, "tb": 234, "sb": 2, "obp": 0.332, "zTotal": 1.18}, {"name": "Jes\u00fas S\u00e1nchez", "pa": 625, "r": 79, "hr": 21, "rbi": 70, "so": 147, "tb": 231, "sb": 12, "obp": 0.311, "zTotal": 1.18}, {"name": "Andrew Benintendi", "pa": 625, "r": 69, "hr": 20, "rbi": 72, "so": 113, "tb": 225, "sb": 6, "obp": 0.313, "zTotal": 1.18}, {"name": "Miguel Andujar", "pa": 625, "r": 71, "hr": 17, "rbi": 72, "so": 114, "tb": 229, "sb": 8, "obp": 0.309, "zTotal": 1.18}, {"name": "Jake Fraley", "pa": 625, "r": 74, "hr": 17, "rbi": 68, "so": 136, "tb": 217, "sb": 17, "obp": 0.312, "zTotal": 1.18}, {"name": "Maximo Acosta", "pa": 625, "r": 74, "hr": 20, "rbi": 73, "so": 138, "tb": 228, "sb": 12, "obp": 0.31, "zTotal": 1.18}, {"name": "Starling Marte", "pa": 625, "r": 76, "hr": 17, "rbi": 68, "so": 137, "tb": 224, "sb": 15, "obp": 0.314, "zTotal": 1.18}, {"name": "Michael Arroyo", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 141, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Cooper Kinney", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 140, "tb": 230, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Manuel Margot", "pa": 625, "r": 74, "hr": 19, "rbi": 73, "so": 135, "tb": 227, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Christian Encarnacion-Strand", "pa": 625, "r": 74, "hr": 22, "rbi": 77, "so": 143, "tb": 234, "sb": 9, "obp": 0.308, "zTotal": 1.18}, {"name": "Kahlil Watson", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 142, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Weston Wilson", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 142, "tb": 228, "sb": 11, "obp": 0.31, "zTotal": 1.18}, {"name": "Emmanuel Rivera", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 139, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Max Anderson", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 139, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Jason Delay", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 140, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Collin Price", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 141, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Maverick Handley", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 140, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Nick Morabito", "pa": 625, "r": 75, "hr": 20, "rbi": 73, "so": 140, "tb": 228, "sb": 12, "obp": 0.312, "zTotal": 1.18}, {"name": "Nick Raposo", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 140, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Shane McGuire", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 140, "tb": 228, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Stuart Fairchild", "pa": 625, "r": 75, "hr": 20, "rbi": 73, "so": 141, "tb": 228, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Eduardo Valencia", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 140, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Dom Nu\u00f1ez", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 141, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Jos\u00e9 Barrero", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 142, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Rodolfo Dur\u00e1n", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 140, "tb": 229, "sb": 11, "obp": 0.31, "zTotal": 1.18}, {"name": "Blake Hunt", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 141, "tb": 229, "sb": 11, "obp": 0.31, "zTotal": 1.18}, {"name": "Luken Baker", "pa": 625, "r": 75, "hr": 21, "rbi": 75, "so": 141, "tb": 229, "sb": 10, "obp": 0.311, "zTotal": 1.18}, {"name": "Davis Wendzel", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 140, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Ji Hwan Bae", "pa": 625, "r": 75, "hr": 20, "rbi": 73, "so": 141, "tb": 227, "sb": 12, "obp": 0.311, "zTotal": 1.18}, {"name": "Trey Lipscomb", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 139, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Dominic Fletcher", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 140, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Juan Yepez", "pa": 625, "r": 74, "hr": 21, "rbi": 74, "so": 138, "tb": 229, "sb": 10, "obp": 0.311, "zTotal": 1.18}, {"name": "Michael Siani", "pa": 625, "r": 75, "hr": 20, "rbi": 73, "so": 140, "tb": 228, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Cristian Pache", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 141, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Kevin Newman", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 139, "tb": 228, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Gabriel Rincones Jr.", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 141, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Ronny Simon", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 139, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Sterlin Thompson", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 140, "tb": 229, "sb": 11, "obp": 0.312, "zTotal": 1.18}, {"name": "Kemp Alderman", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 141, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Rhylan Thomas", "pa": 625, "r": 74, "hr": 20, "rbi": 73, "so": 137, "tb": 228, "sb": 11, "obp": 0.311, "zTotal": 1.18}, {"name": "Zac Veen", "pa": 625, "r": 76, "hr": 19, "rbi": 71, "so": 144, "tb": 226, "sb": 14, "obp": 0.31, "zTotal": 1.18}, {"name": "Drake Baldwin", "pa": 625, "r": 72, "hr": 20, "rbi": 77, "so": 118, "tb": 228, "sb": 2, "obp": 0.318, "zTotal": 1.17}, {"name": "Miguel Vargas", "pa": 625, "r": 71, "hr": 19, "rbi": 69, "so": 119, "tb": 221, "sb": 8, "obp": 0.316, "zTotal": 1.17}, {"name": "Harrison Bader", "pa": 625, "r": 77, "hr": 20, "rbi": 69, "so": 151, "tb": 226, "sb": 18, "obp": 0.301, "zTotal": 1.17}, {"name": "Romy Gonzalez", "pa": 625, "r": 75, "hr": 19, "rbi": 72, "so": 150, "tb": 233, "sb": 15, "obp": 0.309, "zTotal": 1.17}, {"name": "Ryan O'Hearn", "pa": 625, "r": 72, "hr": 17, "rbi": 72, "so": 122, "tb": 226, "sb": 6, "obp": 0.33, "zTotal": 1.17}, {"name": "Josh Lowe", "pa": 625, "r": 77, "hr": 19, "rbi": 66, "so": 163, "tb": 225, "sb": 24, "obp": 0.301, "zTotal": 1.17}, {"name": "Triston Casas", "pa": 625, "r": 74, "hr": 22, "rbi": 78, "so": 146, "tb": 231, "sb": 7, "obp": 0.319, "zTotal": 1.17}, {"name": "Adael Amador", "pa": 625, "r": 73, "hr": 17, "rbi": 68, "so": 128, "tb": 217, "sb": 14, "obp": 0.311, "zTotal": 1.17}, {"name": "Jos\u00e9 Ferm\u00edn", "pa": 625, "r": 73, "hr": 19, "rbi": 70, "so": 131, "tb": 222, "sb": 12, "obp": 0.31, "zTotal": 1.17}, {"name": "Emmanuel Rodriguez", "pa": 625, "r": 76, "hr": 21, "rbi": 73, "so": 144, "tb": 228, "sb": 11, "obp": 0.313, "zTotal": 1.17}, {"name": "Brice Matthews", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 145, "tb": 228, "sb": 12, "obp": 0.31, "zTotal": 1.17}, {"name": "Drew Romo", "pa": 625, "r": 74, "hr": 20, "rbi": 74, "so": 140, "tb": 228, "sb": 11, "obp": 0.31, "zTotal": 1.17}, {"name": "Blake Sabol", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 141, "tb": 228, "sb": 11, "obp": 0.311, "zTotal": 1.17}, {"name": "Enmanuel Valdez", "pa": 625, "r": 74, "hr": 21, "rbi": 74, "so": 139, "tb": 228, "sb": 10, "obp": 0.31, "zTotal": 1.17}, {"name": "Eric Haase", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 142, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.17}, {"name": "Nick Madrigal", "pa": 625, "r": 74, "hr": 19, "rbi": 71, "so": 132, "tb": 224, "sb": 11, "obp": 0.311, "zTotal": 1.17}, {"name": "Liover Peguero", "pa": 625, "r": 75, "hr": 20, "rbi": 73, "so": 141, "tb": 228, "sb": 11, "obp": 0.31, "zTotal": 1.17}, {"name": "Petey Halpin", "pa": 625, "r": 75, "hr": 20, "rbi": 73, "so": 141, "tb": 228, "sb": 11, "obp": 0.31, "zTotal": 1.17}, {"name": "Tommy Troy", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 141, "tb": 228, "sb": 11, "obp": 0.31, "zTotal": 1.17}, {"name": "Jorbit Vivas", "pa": 625, "r": 74, "hr": 20, "rbi": 73, "so": 137, "tb": 226, "sb": 11, "obp": 0.31, "zTotal": 1.17}, {"name": "Brandon Valenzuela", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 141, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.17}, {"name": "Shay Whitcomb", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 142, "tb": 228, "sb": 11, "obp": 0.309, "zTotal": 1.17}, {"name": "Jhonny Pereda", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 140, "tb": 228, "sb": 11, "obp": 0.311, "zTotal": 1.17}, {"name": "Hayden Senger", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 141, "tb": 228, "sb": 11, "obp": 0.31, "zTotal": 1.17}, {"name": "Kristian Robinson", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 143, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.17}, {"name": "Ryan Fitzgerald", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 141, "tb": 228, "sb": 11, "obp": 0.31, "zTotal": 1.17}, {"name": "Tom\u00e1s Nido", "pa": 625, "r": 74, "hr": 20, "rbi": 74, "so": 140, "tb": 228, "sb": 11, "obp": 0.31, "zTotal": 1.17}, {"name": "Trei Cruz", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 141, "tb": 228, "sb": 11, "obp": 0.311, "zTotal": 1.17}, {"name": "Esmerlyn Valdez", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 142, "tb": 229, "sb": 11, "obp": 0.311, "zTotal": 1.17}, {"name": "Christian Franklin", "pa": 625, "r": 75, "hr": 20, "rbi": 73, "so": 141, "tb": 228, "sb": 11, "obp": 0.312, "zTotal": 1.17}, {"name": "Vidal Bruj\u00e1n", "pa": 625, "r": 74, "hr": 20, "rbi": 73, "so": 139, "tb": 226, "sb": 12, "obp": 0.31, "zTotal": 1.17}, {"name": "Jared Young", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 141, "tb": 228, "sb": 11, "obp": 0.31, "zTotal": 1.17}, {"name": "Jose Rojas", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 140, "tb": 228, "sb": 11, "obp": 0.31, "zTotal": 1.17}, {"name": "Drew Waters", "pa": 625, "r": 75, "hr": 20, "rbi": 73, "so": 142, "tb": 228, "sb": 11, "obp": 0.311, "zTotal": 1.17}, {"name": "Dustin Harris", "pa": 625, "r": 75, "hr": 20, "rbi": 73, "so": 141, "tb": 227, "sb": 12, "obp": 0.31, "zTotal": 1.17}, {"name": "Aaron Schunk", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 141, "tb": 229, "sb": 11, "obp": 0.31, "zTotal": 1.17}, {"name": "Matt Koperniak", "pa": 625, "r": 74, "hr": 20, "rbi": 73, "so": 139, "tb": 228, "sb": 11, "obp": 0.31, "zTotal": 1.17}, {"name": "Jonah Bride", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 140, "tb": 228, "sb": 11, "obp": 0.312, "zTotal": 1.17}, {"name": "A.J. Vukovich", "pa": 625, "r": 75, "hr": 20, "rbi": 74, "so": 142, "tb": 229, "sb": 11, "obp": 0.31, "zTotal": 1.17}, {"name": "Akil Baddoo", "pa": 625, "r": 75, "hr": 20, "rbi": 73, "so": 142, "tb": 227, "sb": 12, "obp": 0.31, "zTotal": 1.17}, {"name": "Jhonkensy Noel", "pa": 625, "r": 75, "hr": 21, "rbi": 75, "so": 142, "tb": 230, "sb": 10, "obp": 0.309, "zTotal": 1.17}, {"name": "Vimael Mach\u00edn", "pa": 625, "r": 74, "hr": 20, "rbi": 73, "so": 138, "tb": 227, "sb": 10, "obp": 0.312, "zTotal": 1.17}, {"name": "Pedro Le\u00f3n", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 142, "tb": 228, "sb": 11, "obp": 0.31, "zTotal": 1.17}, {"name": "Nicky Lopez", "pa": 625, "r": 74, "hr": 19, "rbi": 71, "so": 136, "tb": 224, "sb": 11, "obp": 0.312, "zTotal": 1.17}, {"name": "Jose Siri", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 144, "tb": 229, "sb": 11, "obp": 0.309, "zTotal": 1.17}, {"name": "T.J. Rumfield", "pa": 625, "r": 74, "hr": 20, "rbi": 73, "so": 139, "tb": 228, "sb": 10, "obp": 0.31, "zTotal": 1.17}, {"name": "Ryan Ward", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 142, "tb": 229, "sb": 11, "obp": 0.31, "zTotal": 1.17}, {"name": "Justin Foscue", "pa": 625, "r": 74, "hr": 20, "rbi": 73, "so": 139, "tb": 227, "sb": 11, "obp": 0.31, "zTotal": 1.17}, {"name": "Alec Bohm", "pa": 625, "r": 70, "hr": 15, "rbi": 72, "so": 104, "tb": 229, "sb": 4, "obp": 0.317, "zTotal": 1.16}, {"name": "Jakob Marsee", "pa": 625, "r": 75, "hr": 14, "rbi": 58, "so": 140, "tb": 201, "sb": 24, "obp": 0.315, "zTotal": 1.16}, {"name": "Josh Bell", "pa": 625, "r": 73, "hr": 21, "rbi": 73, "so": 121, "tb": 222, "sb": 3, "obp": 0.32, "zTotal": 1.16}, {"name": "Ernie Clement", "pa": 625, "r": 67, "hr": 11, "rbi": 61, "so": 79, "tb": 212, "sb": 11, "obp": 0.29, "zTotal": 1.16}, {"name": "Isaac Collins", "pa": 625, "r": 76, "hr": 15, "rbi": 64, "so": 133, "tb": 213, "sb": 16, "obp": 0.322, "zTotal": 1.16}, {"name": "Victor Robles", "pa": 625, "r": 76, "hr": 14, "rbi": 58, "so": 138, "tb": 208, "sb": 24, "obp": 0.307, "zTotal": 1.16}, {"name": "JJ Bleday", "pa": 625, "r": 73, "hr": 23, "rbi": 78, "so": 142, "tb": 229, "sb": 7, "obp": 0.31, "zTotal": 1.16}, {"name": "Jeferson Quero", "pa": 625, "r": 73, "hr": 20, "rbi": 75, "so": 136, "tb": 228, "sb": 10, "obp": 0.307, "zTotal": 1.16}, {"name": "Noelvi Marte", "pa": 625, "r": 73, "hr": 20, "rbi": 72, "so": 149, "tb": 231, "sb": 17, "obp": 0.297, "zTotal": 1.16}, {"name": "Andy Ib\u00e1\u00f1ez", "pa": 625, "r": 74, "hr": 19, "rbi": 73, "so": 133, "tb": 226, "sb": 10, "obp": 0.306, "zTotal": 1.16}, {"name": "Miguel Rojas", "pa": 625, "r": 74, "hr": 17, "rbi": 70, "so": 125, "tb": 220, "sb": 10, "obp": 0.308, "zTotal": 1.16}, {"name": "Jett Williams", "pa": 625, "r": 74, "hr": 20, "rbi": 73, "so": 142, "tb": 226, "sb": 12, "obp": 0.311, "zTotal": 1.16}, {"name": "Juan Brito", "pa": 625, "r": 74, "hr": 19, "rbi": 72, "so": 135, "tb": 225, "sb": 10, "obp": 0.311, "zTotal": 1.16}, {"name": "Richie Palacios", "pa": 625, "r": 73, "hr": 18, "rbi": 69, "so": 132, "tb": 219, "sb": 13, "obp": 0.313, "zTotal": 1.16}, {"name": "Aidan Miller", "pa": 625, "r": 74, "hr": 20, "rbi": 73, "so": 141, "tb": 228, "sb": 11, "obp": 0.31, "zTotal": 1.16}, {"name": "Coby Mayo", "pa": 625, "r": 75, "hr": 21, "rbi": 74, "so": 144, "tb": 229, "sb": 10, "obp": 0.311, "zTotal": 1.16}, {"name": "Leody Taveras", "pa": 625, "r": 75, "hr": 20, "rbi": 71, "so": 141, "tb": 226, "sb": 13, "obp": 0.307, "zTotal": 1.16}, {"name": "Alejandro Osuna", "pa": 625, "r": 75, "hr": 19, "rbi": 71, "so": 140, "tb": 225, "sb": 12, "obp": 0.311, "zTotal": 1.16}, {"name": "Jorge Alfaro", "pa": 625, "r": 74, "hr": 20, "rbi": 74, "so": 142, "tb": 228, "sb": 11, "obp": 0.31, "zTotal": 1.16}, {"name": "Eli White", "pa": 625, "r": 76, "hr": 20, "rbi": 72, "so": 145, "tb": 228, "sb": 13, "obp": 0.308, "zTotal": 1.16}]
;
;

    // =============================================================================
    // CONSTANTS
    // =============================================================================
    const NUM_WEEKS = 25;
    const POSITIONS = ['C', '1B', '2B', '3B', 'SS', 'LF', 'CF', 'RF', 'UTIL'];
    const TEAM_NAMES = ['My Team', 'JDM', 'Calabria', 'Ferrante', 'Prut', 'Gwon', 'Bish', 'Jerik', 'Buster', 'Triz', 'Fanning', 'B Smith', 'Der', 'Wes', 'Derek', 'Mende'];

    // Weekly standard deviations from 2024 league data
    const WEEKLY_SD = { R: 6.03, HR: 2.93, RBI: 6.72, SB: 2.57, SO: 7.45, TB: 15.94, OBP: 0.04 };

    // League average weekly totals
    const LEAGUE_AVG = { R: 28.96, HR: 8.02, RBI: 27.86, SB: 4.74, SO: 50.11, TB: 88.87, OBP: 0.32 };

    // Replacement level: 625 PA of replacement-level production
    // All players in the CSV are supplemented to 625 PA with replacement production
    // so this baseline is consistent with how players are valued
    const TARGET_PA = 625;
    const REP_PA_BASE = 505.5;
    const REPLACEMENT = {
        name: 'Replacement',
        pa: TARGET_PA,
        r: Math.round(60.8 / REP_PA_BASE * TARGET_PA),   // 75
        hr: Math.round(16.8 / REP_PA_BASE * TARGET_PA),  // 21
        rbi: Math.round(60.1 / REP_PA_BASE * TARGET_PA), // 74
        so: Math.round(113.1 / REP_PA_BASE * TARGET_PA), // 140
        tb: Math.round(185.9 / REP_PA_BASE * TARGET_PA), // 230
        sb: Math.round(8.8 / REP_PA_BASE * TARGET_PA),   // 11
        obp: 0.312,
        zTotal: 0
    };

    // =============================================================================
    // STATE
    // =============================================================================
    // All teams have position-based rosters
    let allTeams = {};
    TEAM_NAMES.forEach(name => {
        allTeams[name] = POSITIONS.map(pos => ({ position: pos, player: null }));
    });

    let draftLog = [];
    let draftedPlayers = new Set();
    let selectedPlayer = null;
    let selectedTeam = null;
    let selectedSlotIndex = null;

    // =============================================================================
    // MATH FUNCTIONS
    // =============================================================================
    function normalCDF(x) {
        const a1 =  0.254829592;
        const a2 = -0.284496736;
        const a3 =  1.421413741;
        const a4 = -1.453152027;
        const a5 =  1.061405429;
        const p  =  0.3275911;
        const sign = x < 0 ? -1 : 1;
        x = Math.abs(x) / Math.sqrt(2);
        const t = 1.0 / (1.0 + p * x);
        const y = 1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * Math.exp(-x * x);
        return 0.5 * (1.0 + sign * y);
    }

    function winProbability(myMean, oppMean, sd, lowerIsBetter = false) {
        const z = lowerIsBetter
            ? (oppMean - myMean) / (sd * Math.sqrt(2))
            : (myMean - oppMean) / (sd * Math.sqrt(2));
        return normalCDF(z);
    }

    // =============================================================================
    // ROSTER CALCULATIONS
    // =============================================================================
    function getPlayerOrReplacement(slot) {
        return slot.player || REPLACEMENT;
    }

    function getWeeklyProjections(teamName) {
        const roster = allTeams[teamName];
        const players = roster.map(getPlayerOrReplacement);
        const proj = {};

        ['R', 'HR', 'RBI', 'SB', 'SO', 'TB'].forEach(cat => {
            const key = cat.toLowerCase();
            proj[cat] = players.reduce((sum, p) => sum + p[key] / NUM_WEEKS, 0);
        });

        proj['OBP'] = players.reduce((sum, p) => sum + p.obp, 0) / players.length;

        return proj;
    }

    function getExpectedWins(teamName) {
        const proj = getWeeklyProjections(teamName);
        const wins = {};
        let total = 0;

        ['R', 'HR', 'RBI', 'SB', 'TB', 'OBP'].forEach(cat => {
            const pWin = winProbability(proj[cat], LEAGUE_AVG[cat], WEEKLY_SD[cat]);
            wins[cat] = pWin;
            total += pWin;
        });

        // SO is lower is better
        wins['SO'] = winProbability(proj['SO'], LEAGUE_AVG['SO'], WEEKLY_SD['SO'], true);
        total += wins['SO'];

        wins['TOTAL'] = total;
        return { projections: proj, wins };
    }

    function calculateMarginalValue(player) {
        const myRoster = allTeams['My Team'];
        // Find first empty slot or return 0 if roster full
        const emptySlotIdx = myRoster.findIndex(s => s.player === null);
        if (emptySlotIdx === -1) return 0;

        const currentWins = getExpectedWins('My Team').wins.TOTAL;

        // Temporarily add player
        myRoster[emptySlotIdx].player = player;
        const newWins = getExpectedWins('My Team').wins.TOTAL;
        myRoster[emptySlotIdx].player = null;

        return newWins - currentWins;
    }

    // =============================================================================
    // UI RENDERING
    // =============================================================================
    function renderRoster() {
        const myRoster = allTeams['My Team'];
        const grid = document.getElementById('roster-grid');
        grid.innerHTML = myRoster.map((slot, idx) => {
            const player = slot.player;
            const filled = player !== null;
            return `
                <div class="roster-slot ${filled ? 'filled' : ''}" onclick="openSlotModal(${idx})">
                    <div class="position">${slot.position}</div>
                    <div class="player-name">${filled ? player.name : 'Replacement'}</div>
                    ${filled ? `<div class="player-stats">R:${player.r} HR:${player.hr} RBI:${player.rbi} SB:${player.sb}</div>` : ''}
                </div>
            `;
        }).join('');

        // Update category table
        const { projections, wins } = getExpectedWins('My Team');
        const tbody = document.getElementById('category-tbody');
        const cats = ['R', 'HR', 'RBI', 'SO', 'TB', 'SB', 'OBP'];
        tbody.innerHTML = cats.map(cat => {
            const pWin = wins[cat];
            const colorClass = pWin >= 0.55 ? 'good' : pWin >= 0.45 ? 'neutral' : 'bad';
            const myVal = cat === 'OBP' ? projections[cat].toFixed(3) : projections[cat].toFixed(1);
            const lgVal = cat === 'OBP' ? LEAGUE_AVG[cat].toFixed(3) : LEAGUE_AVG[cat].toFixed(1);
            return `
                <tr>
                    <td>${cat}</td>
                    <td>${myVal}</td>
                    <td>${lgVal}</td>
                    <td class="win-prob ${colorClass}">${(pWin * 100).toFixed(1)}%</td>
                </tr>
            `;
        }).join('');

        document.getElementById('expected-wins').textContent = wins.TOTAL.toFixed(2);
    }

    function renderAvailablePlayers(filter = '') {
        const list = document.getElementById('player-list');
        const filterLower = filter.toLowerCase();

        // Calculate marginal values
        const playersWithMV = PLAYERS
            .filter(p => !draftedPlayers.has(p.name))
            .filter(p => p.name.toLowerCase().includes(filterLower))
            .map(p => ({ ...p, mv: calculateMarginalValue(p) }))
            .sort((a, b) => b.mv - a.mv);

        const header = `
            <div class="player-row header">
                <div>#</div>
                <div>Name</div>
                <div>PA</div>
                <div>R</div>
                <div>HR</div>
                <div>RBI</div>
                <div>SO</div>
                <div>TB</div>
                <div>SB</div>
                <div>OBP</div>
                <div>MargVal</div>
                <div>zTotal</div>
            </div>
        `;

        const rows = playersWithMV.slice(0, 100).map((p, idx) => `
            <div class="player-row" onclick="openDraftModal('${p.name.replace(/'/g, "\\'")}')">
                <div>${idx + 1}</div>
                <div>${p.name}</div>
                <div>${p.pa}</div>
                <div>${p.r}</div>
                <div>${p.hr}</div>
                <div>${p.rbi}</div>
                <div>${p.so}</div>
                <div>${p.tb}</div>
                <div>${p.sb}</div>
                <div>${p.obp.toFixed(3)}</div>
                <div class="marginal-value">+${p.mv.toFixed(3)}</div>
                <div class="z-total">${p.zTotal.toFixed(2)}</div>
            </div>
        `).join('');

        list.innerHTML = header + rows;
    }

    function renderOtherTeams() {
        const grid = document.getElementById('other-teams-grid');
        grid.innerHTML = TEAM_NAMES.map(teamName => {
            const roster = allTeams[teamName];
            const { projections } = getExpectedWins(teamName);
            const isMyTeam = teamName === 'My Team';

            const rosterHtml = roster.map(slot => {
                const hasPlayer = slot.player !== null;
                return `
                    <div class="mini-slot">
                        <span class="pos">${slot.position}:</span>
                        <span class="name ${hasPlayer ? '' : 'empty'}">${hasPlayer ? slot.player.name.split(' ').pop() : '-'}</span>
                    </div>
                `;
            }).join('');

            const projHtml = ['R', 'HR', 'RBI', 'SO', 'TB', 'SB', 'OBP'].map(cat => {
                const val = cat === 'OBP' ? projections[cat].toFixed(3) : projections[cat].toFixed(1);
                return `<div class="proj-row"><span class="cat">${cat}:</span><span class="val">${val}</span></div>`;
            }).join('');

            return `
                <div class="other-team-card ${isMyTeam ? 'my-team-card' : ''}">
                    <h4>${teamName}</h4>
                    <div class="team-roster-mini">${rosterHtml}</div>
                    <div class="team-projections">${projHtml}</div>
                </div>
            `;
        }).join('');
    }

    function renderDraftLog() {
        const log = document.getElementById('draft-log');
        if (draftLog.length === 0) {
            log.innerHTML = '<em>No picks yet...</em>';
            return;
        }
        log.innerHTML = draftLog.map((entry, idx) => `
            <div class="draft-log-entry ${entry.team === 'My Team' ? 'my-pick' : ''}">
                <span class="pick-num">${idx + 1}.</span>
                <span class="team-name">${entry.team}</span>: ${entry.player} (${entry.position})
            </div>
        `).join('');
    }

    // =============================================================================
    // MODAL FUNCTIONS
    // =============================================================================
    function openDraftModal(playerName) {
        selectedPlayer = PLAYERS.find(p => p.name === playerName);
        if (!selectedPlayer) return;
        selectedTeam = null;

        document.getElementById('modal-player-name').textContent = playerName;
        document.getElementById('position-select-container').style.display = 'none';
        document.getElementById('confirm-draft-btn').style.display = 'none';

        const teamSelect = document.getElementById('team-select');
        teamSelect.innerHTML = TEAM_NAMES.map(team => `
            <button class="team-btn ${team === 'My Team' ? 'my-team' : ''}"
                    onclick="selectTeam('${team.replace(/'/g, "\\'")}')">
                ${team}
            </button>
        `).join('');

        document.getElementById('draft-modal').classList.add('active');
    }

    function selectTeam(teamName) {
        selectedTeam = teamName;

        // Update button styles
        document.querySelectorAll('#team-select .team-btn').forEach(btn => {
            btn.classList.remove('selected');
            if (btn.textContent.trim() === teamName) {
                btn.classList.add('selected');
            }
        });

        // Show position selection
        const roster = allTeams[teamName];
        const posSelect = document.getElementById('position-select');
        posSelect.innerHTML = POSITIONS.map((pos, idx) => {
            const filled = roster[idx].player !== null;
            return `
                <button class="position-btn ${filled ? 'filled' : ''}"
                        onclick="${filled ? '' : `selectPosition(${idx})`}"
                        ${filled ? 'disabled' : ''}>
                    ${pos}${filled ? ' (taken)' : ''}
                </button>
            `;
        }).join('');

        document.getElementById('position-select-container').style.display = 'block';
    }

    function selectPosition(posIdx) {
        if (!selectedPlayer || !selectedTeam) return;

        const roster = allTeams[selectedTeam];
        const position = POSITIONS[posIdx];

        // Add player to roster
        roster[posIdx].player = selectedPlayer;
        draftedPlayers.add(selectedPlayer.name);
        draftLog.push({ team: selectedTeam, player: selectedPlayer.name, position: position });

        closeModal();
        renderAll();
    }

    function closeModal() {
        document.getElementById('draft-modal').classList.remove('active');
        selectedPlayer = null;
        selectedTeam = null;
    }

    function openSlotModal(slotIdx) {
        selectedSlotIndex = slotIdx;
        const slot = allTeams['My Team'][slotIdx];

        document.getElementById('slot-modal-title').textContent = `${slot.position} Slot`;
        document.getElementById('clear-slot-btn').style.display = slot.player ? 'inline-block' : 'none';
        document.getElementById('slot-search').value = '';

        renderSlotPlayerList('');
        document.getElementById('slot-modal').classList.add('active');
    }

    function closeSlotModal() {
        document.getElementById('slot-modal').classList.remove('active');
        selectedSlotIndex = null;
    }

    function renderSlotPlayerList(filter) {
        const list = document.getElementById('slot-player-list');
        const filterLower = filter.toLowerCase();
        const myRoster = allTeams['My Team'];

        const available = PLAYERS
            .filter(p => !draftedPlayers.has(p.name) ||
                        (myRoster[selectedSlotIndex]?.player?.name === p.name))
            .filter(p => p.name.toLowerCase().includes(filterLower))
            .slice(0, 50);

        list.innerHTML = available.map(p => `
            <div class="player-row" onclick="assignToSlot('${p.name.replace(/'/g, "\\'")}')">
                <div></div>
                <div>${p.name}</div>
                <div>${p.pa}</div>
                <div>${p.r}</div>
                <div>${p.hr}</div>
                <div>${p.rbi}</div>
                <div>${p.so}</div>
                <div>${p.tb}</div>
                <div>${p.sb}</div>
                <div>${p.obp.toFixed(3)}</div>
                <div></div>
                <div class="z-total">${p.zTotal.toFixed(2)}</div>
            </div>
        `).join('');
    }

    function assignToSlot(playerName) {
        const player = PLAYERS.find(p => p.name === playerName);
        if (!player || selectedSlotIndex === null) return;

        const myRoster = allTeams['My Team'];
        const position = POSITIONS[selectedSlotIndex];

        // Remove from drafted if switching within roster
        const currentPlayer = myRoster[selectedSlotIndex].player;

        // Check if player is already on roster in different slot
        const existingSlot = myRoster.findIndex(s => s.player?.name === playerName);
        if (existingSlot !== -1 && existingSlot !== selectedSlotIndex) {
            myRoster[existingSlot].player = currentPlayer; // Swap
        }

        myRoster[selectedSlotIndex].player = player;

        // Mark as drafted if not already
        if (!draftedPlayers.has(playerName)) {
            draftedPlayers.add(playerName);
            draftLog.push({ team: 'My Team', player: playerName, position: position });
        }

        closeSlotModal();
        renderAll();
    }

    function clearSlot() {
        if (selectedSlotIndex === null) return;
        const myRoster = allTeams['My Team'];
        const player = myRoster[selectedSlotIndex].player;
        if (player) {
            // Keep in drafted set but remove from roster
            myRoster[selectedSlotIndex].player = null;
        }
        closeSlotModal();
        renderAll();
    }

    // =============================================================================
    // INITIALIZATION
    // =============================================================================
    function renderAll() {
        renderRoster();
        renderAvailablePlayers(document.getElementById('player-search')?.value || '');
        renderOtherTeams();
        renderDraftLog();
    }

    document.addEventListener('DOMContentLoaded', () => {
        // Tab switching
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(`${tab.dataset.tab}-panel`).classList.add('active');
            });
        });

        // Search boxes
        document.getElementById('player-search').addEventListener('input', (e) => {
            renderAvailablePlayers(e.target.value);
        });

        document.getElementById('slot-search').addEventListener('input', (e) => {
            renderSlotPlayerList(e.target.value);
        });

        // Clear slot button
        document.getElementById('clear-slot-btn').addEventListener('click', clearSlot);

        // Initial render
        renderAll();
    });
    </script>
</body>
</html>
